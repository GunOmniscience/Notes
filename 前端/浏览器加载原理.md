- 遵循深度优先搜索

- **绘制DOM树：**

  **DOM解析**是**不会下载东西**的，他只要**读到一个标签**它就把它给**挂到DOM树上**了，然后在**异步的下载**需要下载的东西，然后**解析和下载都完成**了就**绘制成了DOM树**

- **绘制CSS树：**

  读取CSS代码形成CSS树

- **形成randerTree** = domTree + cssTree

- 页面开始绘制

- **reflow 重排：**

  当我们删除一个节点或者新增一个节点，整个domTree重新画，所以就会导致整个randerTree重新画，所以我们要减少页面中节点的增删改查，会影响页面效率

- **repaint 重绘**

  更改颜色啊啥的

- **为什么js和html是同步的/js是单线程**，因为js能够更改DOM，所以它很有可能还在绘制的时候js就把它更改了，所以我们就得把script代码写在DOM的最下面

### 1.异步加载JS

- 它出错了不会阻断js/html/css的下载

- 它会并行的去下载

  ![批注 2020-04-05 141625](F:\Typora\笔记图片(勿删)\批注 2020-04-05 141625.jpg)

  ​	1.defer异步加载

  - 只有IE可以用
  - 在引入的script标签里面加defer属性就好了
  - 它发生在整个页面解析完毕时
  - 它可以把script内部的js代码变成异步的

  2.async异步加载

  - 它时W3C标准的，基本上的浏览器都能用(除IE9以下)
  - 它是只要加载完就执行
  - 它只能加载外部的，内部的代码不行

  ***开发中经常使用 **3.通过js创建一个script标签然后把它插入页面中实现异步加载(预加载机制)

  - ![批注 2020-04-05 150647](F:\Typora\笔记图片(勿删)\批注 2020-04-05 150647.jpg)

  - 它只有在你把它appendChild插入页面中的时候才会来执行这个js文件，不然它只是加载，异步下载

  - 节省页面效率，可以让他变成触发某个事件才执行，这样能大大的减少资源占用

  - 此时我们如果导入的是一个工具JS，那么我们想执行这个工具里面的工具，我们如果直接去调用的话，它会文件还没加载完我们就去执行，就会报错了，所以这时候我们的onload事件就派上了大用处：

    ```js
    script.onload = function (){
        test();
    }
    ```

    IE中script标签没有onload事件

    IE中有一个属性：readState

    script = "loding",它的值是可以改变的，当他加载完，值为:loaded/complete

    它有一个事件是：onreadystatechange当readstate值变化触发

    ```js
    script.onreadstatechange = function (){
        if(script.readyState == "complete" || script.readyState == "loaded"){
            函数();
        }
    }
    ```

    我们可以写一个封装函数，因为只有IE里面有这些属性，我们可以以后不用这么麻烦的去创建一个script然后去添加js文件

    ![批注 2020-04-05 153602](F:\Typora\笔记图片(勿删)\批注 2020-04-05 153602.jpg)

    - ​	因为如果我们加载文件的速度过快的话，我们的值立马就改变成loaded了，而此时我们的那个事件还没有读到，这样我们的onreadystatechange和onload事件就触发不了了，所以我们把src给放在我们的这些事件后边，我们就万无一失了，这就是最优解

    - 而我们此时要加入页面的js文件还没有读取，而我们此时就把它这个方法名给填进去，就报错了，所以我们调用这个函数的时候我们的事件参数写成**一个匿名函数**，在这个匿名函数的里面用哪个js文件里面的  函数名()   这样来执行，就不会报错了

    - 我们还可以传字符串，然后把函数库写成json的对象形式然后我们通过[]属性的方式去执行

      ![批注 2020-04-05 154931](F:\Typora\笔记图片(勿删)\批注 2020-04-05 154931.jpg)

### 2.加载过程

onload是全部执行完才执行

jqery里面的ready()是在解析完就执行，它的底层就是哪个state的值变化==什么的时候就加载![批注 2020-04-05 164820](F:\Typora\笔记图片(勿删)\批注 2020-04-05 164820.jpg)

**js时间队列：**

先自身js，后执行你设置事件，比如settimeout，然后这些事件在按你设置的事件快慢执行

